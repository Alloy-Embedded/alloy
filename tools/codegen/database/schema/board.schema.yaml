# YAML Schema for Board Database Files
# This schema defines the structure for board configuration files
# Owner: enhance-cli-professional-tool (CLI Spec)

schema_version: "1.0"

type: object
required:
  - schema_version
  - board
  - mcu
  - clock
  - pinout

properties:
  schema_version:
    type: string
    pattern: "^\\d+\\.\\d+$"

  board:
    type: object
    required:
      - id
      - display_name
      - vendor
    properties:
      id:
        type: string
        pattern: "^[a-z0-9_]+$"
        description: "Board identifier (e.g., 'nucleo_f401re')"

      display_name:
        type: string
        description: "Human-readable board name"

      vendor:
        type: string

      url:
        type: string
        format: uri
        description: "Product page URL"

  mcu:
    type: object
    required:
      - part_number
      - family
    properties:
      part_number:
        type: string
        description: "MCU part number used on this board"

      family:
        type: string
        description: "MCU family identifier"

  clock:
    type: object
    required:
      - system_freq_hz
    properties:
      system_freq_hz:
        type: integer
        minimum: 1
        description: "System clock frequency in Hz"

      xtal_freq_hz:
        type: integer
        minimum: 0
        description: "External crystal frequency (0 if using internal)"

      has_pll:
        type: boolean
        default: false

  pinout:
    type: object
    description: "Board-specific pinout information"
    properties:
      leds:
        type: array
        items:
          type: object
          required:
            - name
            - gpio
            - active
          properties:
            name:
              type: string
            color:
              type: string
            gpio:
              type: string
              pattern: "^P[A-Z]\\d+$"
            active:
              type: string
              enum: [high, low]
            description:
              type: string

      buttons:
        type: array
        items:
          type: object
          required:
            - name
            - gpio
            - active
          properties:
            name:
              type: string
            gpio:
              type: string
            active:
              type: string
              enum: [high, low]
            description:
              type: string

      debugger:
        type: object
        properties:
          type:
            type: string
            description: "Debugger type (e.g., 'ST-LINK/V2-1')"
          uart:
            type: object
            properties:
              tx:
                type: string
              rx:
                type: string
              instance:
                type: string
              description:
                type: string

  peripherals:
    type: object
    description: "Peripheral pin mappings for this board"
    # Flexible schema - each peripheral type has different structure

  examples:
    type: array
    items:
      type: string
    description: "Example project names for this board"

  status:
    type: string
    enum: [supported, experimental, deprecated]
    default: supported

  tags:
    type: array
    items:
      type: string
